{% extends "base.html" %}

{% block title %}{{ data.name or "Liturgical Calendar" }} - {{ date.strftime('%B %d, %Y') }}{% endblock %}

{% block content %}
<div class="header">
    {% if data.season %}
    <div class="header-season">{{ data.season }} â€” <span class="header-date">{{ date.strftime('%-d %B, %Y') }}</span></div>
    {% else %}
    <div class="header-date">{{ date.strftime('%-d %B, %Y') }}</div>
    {% endif %}
</div>

<div class="content">

    {% set artwork_path = data_service.get_artwork_path(date) %}
    {% if artwork_path %}
    <div class="image-section">
        <img src="/api/artwork/{{ date.strftime('%Y-%m-%d') }}" alt="Liturgical Artwork for {{ date.strftime('%B %d, %Y') }}" class="liturgical-image">
    </div>
    {% elif next_artwork %}
    <a href="/{{ next_artwork.date_obj.strftime('%Y-%m-%d') if next_artwork.date_obj else '' }}" class="image-section next-artwork-section">
        <div class="next-artwork-container">
            <img src="/api/next-artwork/{{ date.strftime('%Y-%m-%d') }}" alt="Next Liturgical Artwork: {{ next_artwork.name }}" class="liturgical-image next-artwork-thumbnail">
            <div class="next-artwork-label-wrapper">
                <div class="next-artwork-label">
                    <span class="next-prefix">NEXT:</span>
                    <span class="next-title">{{ next_artwork.name }}</span>
                </div>
                {% if next_artwork.date %}
                <div class="next-artwork-date">{{ next_artwork.date.upper() }}</div>
                {% endif %}
            </div>
        </div>
    </a>
    {% endif %}

    {% if data.name %}
    <div class="feast-title">{{ data.name }}</div>
    {% else %}
    <div class="feast-title">{{ date.strftime('%A') }}</div>
    {% endif %}


    {% if data.readings %}
    <div class="readings">
        {% if data.week %}
        <h3>{{ data.week.upper() }}</h3>
        {% endif %}
        <ul>
            {% for reading in data.readings %}
            <li>{{ reading }}</li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}

    {% if wikipedia_summary %}
    <div class="wikipedia-summary">
        <p>{{ wikipedia_summary.extract }}</p>
        {% if wikipedia_summary.content_url %}
        <a href="{{ wikipedia_summary.content_url }}" class="wikipedia-link" target="_blank">
            Read more on Wikipedia
        </a>
        {% endif %}
    </div>
    {% endif %}

    <ul class="api-links">
        <li><a href="/api/info/{{ date.strftime('%Y-%m-%d') }}">JSON</a></li>
        <li><a href="/api/artwork/{{ date.strftime('%Y-%m-%d') }}">Original Artwork</a></li>
        <li><a href="/api/image/{{ date.strftime('%Y-%m-%d') }}/png">ePaper PNG</a></li>
        <li><a href="/api/image/{{ date.strftime('%Y-%m-%d') }}/bmp">ePaper BMP</a></li>
        <li><a href="/today">Go to Today</a></li>
    </ul>
</div>
{% endblock %} 